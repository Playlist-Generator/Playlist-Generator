CREATE TABLE users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(255),
  password VARCHAR(255),
  email VARCHAR(255),
  profile_picture longtext    null,
  is_admin BOOLEAN
);

CREATE TABLE genres (
  id INT PRIMARY KEY AUTO_INCREMENT,
  genre VARCHAR(20) not null

);

CREATE TABLE artists (
  id BIGINT PRIMARY KEY AUTO_INCREMENT NOT NULL ,
  name VARCHAR(255) collate utf8mb4_unicode_ci not null,
  track_list longtext not null,
   md5_image  longtext   null
);

CREATE TABLE albums (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(255),
  tracklist_url VARCHAR(255),
  genres_id INT,
  md5_image  longtext   null,
  FOREIGN KEY (genres_id) REFERENCES genres(id)
);

CREATE TABLE playlists (
  id INT PRIMARY KEY,
  user_id INT,
  title VARCHAR(255),
  total_playtime double default 0 not null,
  average_rank BIGINT not null,
  md5_image  longtext   null,
  FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE tracks (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  album_id BIGINT NOT NULL ,
  genre_id INT NOT NULL ,
  artist_id BIGINT NOT NULL ,
  title LONGTEXT collate utf8mb4_unicode_ci NOT NULL,
  duration DOUBLE DEFAULT 0 NOT NULL ,
  ranks BIGINT NOT NULL ,
  preview_url LONGTEXT NOT NULL ,
  md5_image  longtext   null,
  constraint tracks_albums_album_id_fk
  FOREIGN KEY (album_id) REFERENCES albums(id),
  constraint tracks_artists_artist_id_fk
  FOREIGN KEY (genre_id) REFERENCES genres(id),
  constraint tracks_genres_genre_id_fk
  FOREIGN KEY (artist_id) REFERENCES artists(id)
);

CREATE TABLE track_playlist (
  track_id BIGINT NOT NULL,
  playlist_id INT NOT NULL,
  FOREIGN KEY (track_id) REFERENCES tracks(id),
  FOREIGN KEY (playlist_id) REFERENCES playlists(id)
);

create table playlists_genres
(
    playlist_id int not null,
    genre_id    int not null,
    constraint playlists_genres_id_fk
        foreign key (genre_id) references genres (id),
    constraint playlists_playlists_playlist_id_fk
        foreign key (playlist_id) references playlists (id)
);